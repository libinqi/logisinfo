<link rel="stylesheet" href="/css/jquery.fileupload.css">

<div class="container w1002 tn_margin" id="qiye">

<%-partial("layouts/info_nav",{current_url:"/line/add"})%>

<div class="col-lg-10 col-md-10 col-sm-10 youce">
<div class="bg_pale_yellow">
    <div class="col-md-12 pad_topbot_change">
        <h4 class="line_b">发布专线
            <small class="pull-right"><a href="/line">返回专线信息</a></small>
        </h4>
    </div>
</div>
<div id="error_container" class="col-lg-12 col-md-12 col-sm-12" style="display: none">
    <div id="error_content" class="line_search tn_padding bn_padding ln_padding bn_margin">
        <!--<label id="error" class="error"></label>-->
    </div>
</div>
<form id="line-form" class="form-horizontal" action="/line" method="POST">
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-sm-4 control-label jiben_left"><span class="text_red">*</span>
        出发城市：</label>

    <div class="col-lg-8 col-sm-8 jiben_right">
        <div class="w100 pull-left">
            <select id="sProvinceCode" name="sProvinceCode" class="form-control min_hundred w100">
            </select>
        </div>
        <div class="w100 pull-left ln_margin">
            <select id="sCityCode" name="sCityCode" class="form-control min_hundred w100">
            </select>
        </div>
        <div class="w150 pull-left ln_margin">
            <select id="sAreaCode" name="sAreaCode" class="form-control min_hundred w150">
            </select>
        </div>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-sm-4 control-label jiben_left"><span class="text_red">*</span>
        到达城市：</label>

    <div class="col-lg-8 col-sm-8 jiben_right">
        <div class="w100 pull-left">
            <select id="eProvinceCode" name="eProvinceCode" class="form-control min_hundred w100">
            </select>
        </div>
        <div class="w100 pull-left ln_margin">
            <select id="eCityCode" name="eCityCode" class="form-control min_hundred w100">
            </select>
        </div>
        <div class="w150 pull-left ln_margin">
            <select id="eAreaCode" name="eAreaCode" class="form-control min_hundred w150">
            </select>
        </div>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-sm-4 control-label jiben_left"><span class="text_red">*</span>
        重货价格：</label>

    <div class="col-lg-8 col-sm-8 jiben_right">
        <input type="text" class="form-control w20 inputinline" id="heavyCargoPrice" name="heavyCargoPrice" value="0"/>元/吨
        <small>0表示面议</small>
    </div>
</div>

<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-sm-4 control-label jiben_left"><span class="text_red">*</span>
        泡货价格：</label>

    <div class="col-lg-8 col-sm-8 jiben_right">
        <input type="text" class="form-control w20 inputinline" id="foamGoodsPrice" name="foamGoodsPrice" value="0"/>元/公斤
        <small>0表示面议</small>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">专线类型：</label>

    <div class="col-lg-4 col-md-4 col-sm-4 jiben_right">
        <% if(locals.line_type){
            var index = 0;
                line_type.forEach(function(lineType){
        %>
        <div class="pad_select w75 pull-left">
            <div class="radio">
                <label>
                    <% if(index == 0){ %>
                    <input type="radio" name="lineTypeCode" class="radio" value="<%= lineType.id %>"
                           checked="checked"/><%= lineType.name %>
                    <% }else{ %>
                    <input type="radio" name="lineTypeCode" class="radio"
                           value="<%= lineType.id %>"/><%= lineType.name %>
                    <% } %>
                </label>
            </div>
        </div>
        <%
            index++;
        });
        } %>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">运输方式：</label>

    <div class="col-lg-3 col-md-3 col-sm-3 jiben_right w300">
        <select id="modeTransportCode" name="modeTransportCode" class="form-control min_hundred w300">
            <% if(locals.mode_transport){
                var index = 0;
                    mode_transport.forEach(function(modeTransport){
            %>
            <option value="<%= modeTransport.id %>"><%= modeTransport.name %></option>
            <% })} %>
        </select>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">是否直达：</label>

    <div class="col-lg-4 col-md-4 col-sm-4 jiben_right">
        <div class="pad_select w75 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" id="optionsRadios3" name="isDirect" class="radio" value="1" checked>直达
                </label>
            </div>
        </div>
        <div class="pad_select w75 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" id="optionsRadios4" name="isDirect" class="radio" value="0">中转
                </label>
            </div>
        </div>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">发车班次：</label>

    <div class="col-lg-8 col-md-8 col-sm-8 jiben_right">
        <div class="pad_select w75 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" id="optionsRadios3" name="isFrozen" class="radio" value="0" checked>不固定
                </label>
            </div>
        </div>
        <div class="pad_select w80 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" id="optionsRadios4" name="isFrozen" class="radio" value="1">固定班车
                </label>
            </div>
        </div>
        <div class="col-xs-5 pad_select">
            <div class="radio">每<input type="number" id="transRateDay" name="transRateDay" placeholder="number"
                                       class="w40" value="1" min="1" max="31">天<input type="number" id="transRateNumber"
                                                                     name="transRateNumber" placeholder="number"
                                                                     class="w40" value="1" min="1">班
            </div>
        </div>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">运输货物：</label>

    <div class="col-lg-8 col-md-8 col-sm-8 jiben_right">

        <% if(locals.line_goods_type){
            var index = 0;
                line_goods_type.forEach(function(lineGoodsType){
        %>
        <% if(index == 0){ %>
        <label class="checkbox-inline">
            <input type="checkbox" name="lineGoodsType" value="<%= lineGoodsType.id %>" class="radio"
                   checked> <%= lineGoodsType.name %>
        </label>
        <% }else{ %>
        <label class="checkbox-inline">
            <input type="checkbox" name="lineGoodsType" value="<%= lineGoodsType.id %>"
                   class="radio"> <%= lineGoodsType.name %>
        </label>
        <% } %>
        <%
            index++;
        });
        } %>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">在途时间：</label>

    <div class="col-lg-8 col-md-8 col-sm-8 jiben_right">
        <% if(locals.trans_time){
            var index = 0;
                trans_time.forEach(function(transTime){
        %>
        <% if(index == 0){ %>
        <div class="pad_select w70 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" name="transTime" class="radio" value="<%= transTime.id %>"
                           text="<%= transTime.name %>"
                           checked><%= transTime.name %>
                </label>
            </div>
        </div>
        <% }else{ %>
        <div class="pad_select w70 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" name="transTime" class="radio" value="<%= transTime.id %>"
                           text="<%= transTime.name %>"><%= transTime.name %>
                </label>
            </div>
        </div>
        <% } %>
        <%
            index++;
        });
        } %>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">附加说明：</label>

    <div class="col-lg-8 col-md-8 col-sm-8 jiben_right">
        <textarea name="freeText" class="form-control" maxlength="500" rows="3"></textarea>
        <small>(限制500字符)</small>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left"><span class="text_red">*</span>起始地联系人：</label>

    <div class="col-lg-3 col-md-3 col-sm-3 jiben_right">
        <input type="text" class="form-control" id="startContact" name="startContact" placeholder="请填写联系人">
    </div>
</div>

<div class="form-group ">
    <label for="inputEmail3" class="col-sm-4 control-label jiben_left"><span class="text_red">*</span> 所在地址：</label>

    <div class="col-sm-8 jiben_right">
        <input type="text" class="form-control" id="startAddress" name="startAddress" placeholder="请填入详细地址，省市县不需要重复填写">
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-sm-4 control-label jiben_left"><span class="text_red">*</span> 手机：</label>

    <div class="col-sm-4 jiben_right">
        <input type="text" class="form-control" id="startPhone" name="startPhone" maxlength="11" placeholder="联系电话和手机必填一项">
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-sm-4 control-label jiben_left">联系电话：</label>
    <div class="col-sm-4 jiben_right">
    <input type="text" class="form-control" id="startTel" name="startTel" placeholder="联系的电话号码">
        </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">到达地联系人：</label>

    <div class="col-lg-3 col-md-3 col-sm-3 jiben_right">
        <input type="text" class="form-control" id="endContact" name="endContact" placeholder="请填写联系人">
    </div>
</div>

<div class="form-group ">
    <label for="inputEmail3" class="col-sm-4 control-label jiben_left">所在地址：</label>

    <div class="col-sm-8 jiben_right">
        <input type="text" class="form-control" id="endAddress" name="endAddress" placeholder="请填入详细地址，省市县不需要重复填写">
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-sm-4 control-label jiben_left">手机：</label>

    <div class="col-sm-4 jiben_right">
        <input type="text" class="form-control" id="endPhone" name="endPhone" maxlength="11" placeholder="联系电话和手机必填一项">
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-sm-4 control-label jiben_left">联系电话：</label>

    <div class="col-sm-4 jiben_right">
        <input type="text" class="form-control" id="endTel" name="endTel" placeholder="联系的电话号码">
    </div>
</div>

<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">信息有效期：</label>

    <div class="col-lg-8 col-md-8 col-sm-8 jiben_right">
        <% if(locals.validate_type){
            var index = 0;
                validate_type.forEach(function(validateType){
        %>
        <% if(index == 0){ %>
        <div class="pad_select w75 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" name="valid" value="<%= validateType.id %>" class="radio"
                           checked><%= validateType.name %>
                </label>
            </div>
        </div>
        <% }else{ %>
        <div class="pad_select w75 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" name="valid" value="<%= validateType.id %>"
                           class="radio"><%= validateType.name %>
                </label>
            </div>
        </div>
        <% } %>
        <%
            index++;
        });
        } %>
    </div>
</div>
<div class="form-group">
    <label for="inputEmail3" class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">发布状态：</label>

    <div class="col-lg-8 col-md-8 col-sm-8 jiben_right">
        <div class="pad_select w75 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" name="status" value="1" class="radio" checked>发布
                </label>
            </div>
        </div>
        <div class="pad_select w75 pull-left">
            <div class="radio">
                <label>
                    <input type="radio" name="status" value="0" class="radio">不发布
                </label>
            </div>
        </div>
    </div>
</div>
<div class="form-group">
    <label class="col-lg-4 col-md-4 col-sm-4 control-label jiben_left">专线图片：</label>

    <div class="col-lg-8 col-md-8 col-sm-8 jiben_right">
        <span class="btn btn-success fileinput-button">
        <i class="glyphicon glyphicon-plus"></i>
        <span>选择上传的图片</span>
        <!-- The file input field used as target for the file upload widget -->
        <input id="fileupload" type="file" name="files[]" multiple>
        </span>
    </div>
</div>
<input type="hidden" id="sProvince" name="sProvince"/>
<input type="hidden" id="sCity" name="sCity"/>
<input type="hidden" id="sArea" name="sArea"/>
<input type="hidden" id="eProvince" name="eProvince"/>
<input type="hidden" id="eCity" name="eCity"/>
<input type="hidden" id="eArea" name="eArea"/>
<input type="hidden" id="line_image" name="image"/>

<div class="clearfix"></div>
<div class="form-group">
    <div class="col-sm-1 col-sm-offset-4">
        <button type="submit" class="btn btn-info btn_detail">发布</button>
    </div>
    <div class="col-sm-1">
        <a href="/line/add" class="btn btn-default btn_detail">重置</a>
    </div>
</div>
</form>
<h4 class="text-primary">发布预览</h4>

<div class="info yulan">
    <div class="info_item">
        <div class="info_title">
            <div class="w450 ln_padding pull-left">
                <span id="per_scity" class="pull-left">未选择</span>
                <span class="zhida"><img id="per_line_type" src="/images/zhida.png"/></span>
                <span id="per_ecity" class="pull-left">未选择</span>
                <span id="per_is_direct" class="pull-left">(直达)</span>
            </div>
            <!--<div class="w100 pull-left"><small>最新订单：<span class="text-primary">5</span></small></div>-->
            <!--<div class="w200 pull-left"><small>更新时间：2013-15-12 5:20</small></div>-->
            <div class="w200 pull-left">
                <small class="dropdown">状态：
                    <a href="#" id="per_status" class="dropdown-toggle" data-toggle="dropdown">已发布</a>
                </small>
            </div>
            <div class="chaozuo pull-right">
                <!--<div class="shouqi pull-left"><a href="#"><img src="/images/shouqi.png"></a></div>-->
                <div class="delet pull-right"><a href="#"><img src="/images/delet.png"></a></div>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="info_content">
            <div class=" pull-left w145 tn_padding ln_padding bn_padding">
                <a href="#"><img id="per_image" src="/images/no-line.jpg" width="135" height="100"></a>
            </div>
            <div class="pull-left w350 tn_padding rn_padding ln_padding lianxi">
                <p>始发地址：<span id="per_startAddress">未填写</span></p>

                <p>联系方式：<span id="per_startPhone" class="text-primary">未填写</span>
                    <span id="per_startTel" class="text-primary">/未填写</span>
                    <span id="per_startContact" class="text-primary">    未填写</span></p>

                <p>到达地址：<span id="per_endAddress">未填写</span></p>

                <p>联系方式：<span id="per_endPhone" class="text-primary">未填写</span>
                    <span id="per_endTel" class="text-primary">/未填写</span>
                    <span id="per_endContact" class="text-primary">    未填写</span></p>
            </div>
            <div class="pull-left w135 ln_padding tn_padding xijie">
                <div class="w65 text-right pull-left">重货价格：</div>
                <div id="per_heavyCargoPrice" class="pull-left">面议</div>
                <div class="w65 text-right pull-left">泡货价格：</div>
                <div id="per_foamGoodsPrice" class="pull-left">面议</div>
                <span class="w65 text-right pull-left">运输方式：</span>

                <div id="per_modeTransport" class="pull-left">公路运输</div>
                <span class="w65 text-right pull-left">发车班次：</span>

                <div id="per_transRate" class="pull-left">不固定</div>
                <span class="w65 text-right pull-left">在途时间：</span>

                <div id="per_transTime" class="pull-left">1天</div>
            </div>
            <div class="pull-right w80 tl_padding">
                <input class="btn btn-block" type="button" value="查看">
                <input class="btn btn-block tn_margin" type="button" value="修改">
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>
</div>
</div>
<script src="/js/jquery.provincesCity.js" type="text/javascript"></script>
<script src="/js/core/city.js" type="text/javascript"></script>
<script src="/js/jquery.validate.min.js" type="text/javascript"></script>
<script src="/js/jquery.ui.widget.js"></script>
<script src="/js/jquery.fileupload.js"></script>
<script>
//调用插件
$(function () {
    $.ProvinceCity('sProvinceCode', 'sCityCode', 'sAreaCode', function (selectProvince, selectCity, selectArea) {
        $("#sProvince").val(selectProvince);
        $("#sCity").val(selectCity);
        $("#per_scity").html(selectProvince + selectCity);

        if (selectArea != "请选择区/县") {
            $("#sArea").val(selectArea);
        }
        else {
            $("#sArea").val('');
        }
    });
    $.ProvinceCity('eProvinceCode', 'eCityCode', 'eAreaCode', function (selectProvince, selectCity, selectArea) {
        $("#eProvince").val(selectProvince);
        $("#eCity").val(selectCity);
        $("#per_ecity").html(selectProvince + selectCity);

        if (selectArea != "请选择区/县") {
            $("#eArea").val(selectArea);
        }
        else {
            $("#eArea").val('');
        }
    });

    $("input[name='lineTypeCode']").each(function () {
        $(this).click(function () {
            var lineType = $(this).val();
            $("#per_line_type").attr("src", (lineType == 1 ? "/images/zhida.png" : "/images/wangfan.png"));
        });
    });

    $("input[name='isDirect']").each(function () {
        $(this).click(function () {
            var isDirect = $(this).val();
            $("#per_is_direct").html("(" + (isDirect == 1 ? "直达" : "中转") + ")");
        });
    });

    $("input[name='status']").each(function () {
        $(this).click(function () {
            var status = $(this).val();
            $("#per_status").html((status == 1 ? "已发布" : "未发布"));
        });
    });


    $("#heavyCargoPrice").blur(function () {
        var heavyCargoPrice = $(this).val();
        if (heavyCargoPrice == 0)
            $("#per_heavyCargoPrice").html("面议");
        else
            $("#per_heavyCargoPrice").html(heavyCargoPrice);
    });

    $("#foamGoodsPrice").blur(function () {
        var foamGoodsPrice = $(this).val();
        if (foamGoodsPrice == 0)
            $("#per_foamGoodsPrice").html("面议");
        else
            $("#per_foamGoodsPrice").html(foamGoodsPrice);
    });

    $("#modeTransportCode").change(function () {
        var selectedIndex = $(this)[0].selectedIndex;
        $("#per_modeTransport").html($(this)[0].options[selectedIndex].text);
    });

    $("input[name='isFrozen']").each(function () {
        $(this).click(function () {
            var isFrozen = $(this).val();
            if (isFrozen == 1) {
                $("#per_transRate").html("不固定");
            }
            else {
                $("#per_transRate").html("每" + $("#transRateDay").val() + "天" + $("#transRateNumber").val() + "班");
            }
        });
    });

    $("#transRateDay").change(function () {
        var isFrozen = $("input[name='isFrozen']:checked").val();
        if (isFrozen == 0)
            $("#per_transRate").html("每" + $("#transRateDay").val() + "天" + $("#transRateNumber").val() + "班");
    });

    $("#transRateNumber").change(function () {
        var isFrozen = $("input[name='isFrozen']:checked").val();
        if (isFrozen == 0)
            $("#per_transRate").html("每" + $("#transRateDay").val() + "天" + $("#transRateNumber").val() + "班");
    });


    $("input[name='transTime']").each(function () {
        $(this).click(function () {
            var transTime = $(this).attr("text");
            $("#per_transTime").html(transTime);
        });
    });

    $("#startContact").change(function(){
        var startContact=$(this).val();
        $("#per_startContact").html(startContact);
    });
    $("#startAddress").change(function(){
        var startAddress=$(this).val();
        $("#per_startAddress").html(startAddress);
    });
    $("#startPhone").change(function(){
        var startPhone=$(this).val();
        $("#per_startPhone").html(startPhone);
    });

    $("#startTel").change(function(){
        var startTel= $(this).val();
        $("#per_startTel").html("/"+startTel);
    });

    $("#endContact").change(function(){
        var endContact=$(this).val();
        $("#per_endContact").html(endContact);
    });
    $("#endAddress").change(function(){
        var endAddress=$(this).val();
        $("#per_endAddress").html(endAddress);
    });
    $("#endPhone").change(function(){
        var endPhone=$(this).val();
        $("#per_endPhone").html(endPhone);
    });

    $("#endTel").change(function(){
       var endTel= $(this).val();
        $("#per_endTel").html("/"+endTel);
    });

    $.validator.addMethod("isMobile", function(value, element) {
        var length = value.length;
        var mobile = /^(13[0-9]|15[012356789]|18[0236789]|14[57])[0-9]{8}$/;
        return this.optional(element) || (length == 11 && mobile.test(value));
    }, "手机号码格式正不正确");

    $.validator.addMethod("isTel", function(value, element) {
        var tel = /^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$/;
        return this.optional(element) || (tel.test(value));
    }, "电话号码格式不正确");

    $('#line-form').validate({
        rules: {
            sProvinceCode: "required",
//                sCityCode:"required",
            eProvinceCode: "required",
//                eCityCode:"required",
            heavyCargoPrice: {
                required: true,
                number: true,
                min: 0
            },
            foamGoodsPrice: {
                required: true,
                number: true,
                min: 0
            },
            lineGoodsType: "required",
            startContact: "required",
            startAddress: "required",
            startPhone: {
                number: true,
                minlength: 11
            },
            endPhone: {
                number: true,
                minlength: 11
            },
            startPhone:"isMobile",
            endPhone:"isMobile",
            startTel:"isTel",
            endTel:"isTel"
        },
        messages: {
            sProvinceCode: "出发城市必选",
            eProvinceCode: "到达城市必选",
            heavyCargoPrice: {
                required: "重货价格必填",
                number: "价格必须为数字",
                min: "价格不能少于0"
            },
            foamGoodsPrice: {
                required: "泡货价格必填",
                number: "价格必须为数字",
                min: "价格不能少于0"
            },
            lineGoodsType: "运输货物必选",
            startContact: "联系人不能为空",
            startAddress: "所在地址不能为空",
            startPhone: {
                required: "手机号码不能为空",
                number: "手机号码必须为数字",
                minlength: "手机号码长度为11位"
            },
            endPhone: {
                number: "手机号码必须为数字",
                minlength: "手机号码长度为11位"
            }
        },
//            invalidHandler: function(event, validator) {
//                // 'this' refers to the form
//                var errors = validator.numberOfInvalids();
//                if (errors) {
//                    var message ='You missed ' + errors + ' fields. They have been highlighted';
//                    $("#error").html(validator.errorList[0].message);
//                    $("#error_container").show();
//                } else {
//                    $("#error_container").hide();
//                }
//            },
//            showErrors: function (errorMap, errorList) {
//                var errors = this.numberOfInvalids();
//                if (errors && errorList) {
//                    $("#error").html(errorList[0].message);
//                    $("#error_container").show();
//                } else {
//                    $("#error_container").hide();
//                }
//            },
        highlight: function (element) {
            $(element).closest('.control-group').removeClass('success').addClass('error');
        },
        submitHandler: function(form) {
            if($("#startPhone").val()==""&&$("#startTel").val()=="")
            {
                $("#startPhone").focus();
                return false;
            }
//            if($("#endPhone").val()==""&&$("#endTel").val()=="")
//            {
//                $("#endPhone").focus();
//                return false;
//            }
            form.submit();
        }
    });

    // Change this to the location of your server-side upload handler:
    var url = 'http://img1.jt56.org/upload/line';

    $('#fileupload').fileupload({
        url: url,
        dataType: 'json',
        done: function (e, data) {
            $.each(data.result.files, function (index, file) {
                $('#per_image').attr("src", file.url);
                $('#line_image').val(file.url);
            });
        },
        progressall: function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $('#progress .progress-bar').css(
                    'width',
                    progress + '%'
            );
        }
    }).prop('disabled', !$.support.fileInput)
            .parent().addClass($.support.fileInput ? undefined : 'disabled');
});
</script>