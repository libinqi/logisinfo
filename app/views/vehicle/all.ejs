<div class="container w1002 tn_margin" id="qiye">

    <%-partial("layouts/info_nav",{current_url:"/vehicle/all"})%>

    <div class="col-lg-10 col-md-10 col-sm-10 youce">
        <div class="bg_pale_yellow">
            <div class="col-lg-12 col-md-12 col-sm-12 pad_topbot_change">
                <h4 class="lh h4_line">
                    <div class="w120 pull-left ts_padding">车源信息</div>

                    <div class="third_nav third_hover"><a href="/vehicle/all">所有信息</a></div>
                    <div class="third_nav"><a href="/vehicle">我的信息</a></div>

                    <a href="/vehicle/add" class="btn pull-right btn-info btn-sm">发布车源</a>
                </h4>
            </div>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="line_search">
                <form class="navbar-form navbar-left" role="search">
                    <div class="w280 pull-left">
                        <div class="w60 pull-left ts_padding">出发地：</div>
                        <div class="w100 pull-left">
                            <select id="sProvince" name="sProvince" class="form-control min_hundred w100 input-sm">
                            </select>
                        </div>
                        <div class="w100 pull-left ln_margin">
                            <select id="sCity" name="sCity" class="form-control min_hundred w100 input-sm">
                            </select>
                        </div>
                        <div class="w100 pull-left ln_margin" style="display: none">
                            <select id="sArea" name="sArea" class="form-control min_hundred w100 input-sm">
                            </select>
                        </div>
                    </div>
                    <div class="w280 pull-left">
                        <div class="w60 pull-left ts_padding">目的地：</div>
                        <div class="w100 pull-left">
                            <select id="eProvince" name="eProvince" class="form-control min_hundred w100 input-sm">
                            </select>
                        </div>
                        <div class="w100 pull-left ln_margin">
                            <select id="eCity" name="eCity" class="form-control min_hundred w100 input-sm">
                            </select>
                        </div>
                        <div class="w100 pull-left ln_margin" style="display: none">
                            <select id="eArea" name="eArea" class="form-control min_hundred w100 input-sm">
                            </select>
                        </div>
                    </div>
                    <div class="pull-left w100"><input type="button" value="搜索" class="btn btn-success btn-sm"
                                                       onclick="search()"/></div>
                </form>
                <div class="clearfix"></div>
            </div>
        </div>
        <script type="text/javascript">
            $(function () {
                $('.info .info_item').hover(function () {
                    $('.info .info_item').removeClass('info_item_hover');
                    $(this).addClass('info_item_hover');
                });
            });
        </script>
        <div class="col-lg-12 col-dm-12 col-sm-12 info tn_margin">
            <% if(locals.vehicles && locals.vehicles.length){
            %>
            <%- partial('vehicle/all_list', {
                vehicles: vehicles,
                current_page: current_page,
                list_count: list_count,
                pages: pages,
                base: base
            }) %>
            <% }else{%>
            <div class="info_item">
                <div class="col-lg-12 tl_padding bl_padding text-danger text-center">对不起，没有找到适合您的信息
                </div>
            </div>
            <% } %>
        </div>
    </div>
</div>
<!--<input type="hidden" id="sProvince" name="sProvince" value="">-->
<!--<input type="hidden" id="sCity" name="sCity" value="">-->
<!--<input type="hidden" id="eProvince" name="eProvince" value="">-->
<!--<input type="hidden" id="eCity" name="eCity" value="">-->

<script src="/js/jquery.provincesCity.js" type="text/javascript"></script>
<script src="/js/core/city.js" type="text/javascript"></script>
<script type="text/javascript">
    //调用插件
    $(function () {
        $.ProvinceCity('sProvince', 'sCity', 'sArea', function (selectProvince, selectCity, selectArea) {
        });
        $.ProvinceCity('eProvince', 'eCity', 'eArea', function (selectProvince, selectCity, selectArea) {
        });

        var sProvince = '<%=sProvince%>';
        var sCity = '<%=sCity%>';
        var eProvince = '<%=eProvince%>';
        var eCity = '<%=eCity%>';

        if (sProvince && sProvince != 'undefined')
            $("#sProvince").val(sProvince).change();
        if (sCity && sCity != 'undefined')
            $("#sCity").val(sCity).change();
        if (eProvince && eProvince != 'undefined')
            $("#eProvince").val(eProvince).change();
        if (eCity && eCity != 'undefined')
            $("#eCity").val(eCity).change();
    });

    function search() {
        var url = "";
        var sProvince = $("#sProvince").val();
        var sCity = $("#sCity").val();
        var eProvince = $("#eProvince").val();
        var eCity = $("#eCity").val();

        if (sProvince) {
            url += "sProvince=" + sProvince;
        }
        if (sCity) {
            url += "&sCity=" + sCity;
        }
        if (eProvince) {
            url += "&eProvince=" + eProvince;
        }
        if (eCity) {
            url += "&eCity=" + eCity;
        }
        if (url) {
            if (url.substr(0, 1) == "&")
                url = url.substr(1, url.length - 1);
            window.location.href = "/vehicle/all?" + url;
        }
        else
        {
            window.location.href = "/vehicle/all";
        }
    }
</script>